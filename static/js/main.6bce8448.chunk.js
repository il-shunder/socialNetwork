(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{17:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(124),s=r.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"ba4a5287-b16d-481b-86b9-562e339658b0"}}),c={getUsers:function(e,t){return s.get("users?page=".concat(e,"&count=").concat(t,"&term=id")).then((function(e){return e.data}))},unFollow:function(e){return s.delete("follow/".concat(e)).then((function(e){return e.data}))},follow:function(e){return s.post("follow/".concat(e)).then((function(e){return e.data}))},getUserProfile:function(e){return s.get("profile/".concat(e)).then((function(e){return e.data}))},getAuth:function(){return s.get("auth/me").then((function(e){return e.data}))}},a={putPhoto:function(e){(new FormData).append("image",e)}},i={getStatus:function(e){return s.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateStatus:function(e){return s.put("profile/status",{status:e}).then((function(e){return e.data}))}},o={postAuth:function(e,t,n){return s.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},deleteAuth:function(){return s.delete("auth/login").then((function(e){return e.data}))}}},237:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},288:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),c=n(59),a=n.n(c),i=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,293)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),s(e),c(e),a(e)}))},o=n(9),u=n(89),l=n(98),d=n(88),j=n(5),b=n(17),h={users:[],page:1,count:5,totalCount:10,isFetching:!1,inProcess:[]};var p=function(e){return{type:"setFetching",isFetching:e}},f=function(e){return{type:"removeFromProcess",value:e}};var O=n(30),m=n.n(O),g=n(65),x=n(48),v={userId:null,userLogin:null,userEmail:null,isAuth:null};var w=function(e,t,n,r){return{type:"setUserAuth",id:e,login:t,email:n,isAuth:r}};function y(){return function(){var e=Object(g.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.d.getAuth();case 2:if(0!==(n=e.sent).resultCode){e.next=5;break}return e.abrupt("return",t(w(n.data.id,n.data.login,n.data.email,!0)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var N=n(126),P=n(123),C={init:!1};var k=Object(o.c)({profilePage:u.b,dialogsPage:l.b,usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"follow":return Object(j.a)(Object(j.a)({},e),{},{users:e.users.map((function(e){return e.id===t.id?Object(j.a)(Object(j.a)({},e),{},{followed:!0}):e}))});case"unFollow":return Object(j.a)(Object(j.a)({},e),{},{users:e.users.map((function(e){return e.id===t.id?Object(j.a)(Object(j.a)({},e),{},{followed:!1}):e}))});case"setUsers":return Object(j.a)(Object(j.a)({},e),{},{users:Object(d.a)(t.users)});case"setTotalCount":return Object(j.a)(Object(j.a)({},e),{},{totalCount:t.count});case"setPage":return Object(j.a)(Object(j.a)({},e),{},{page:t.page});case"setFetching":return Object(j.a)(Object(j.a)({},e),{},{isFetching:t.isFetching});case"setProcess":return Object(j.a)(Object(j.a)({},e),{},{inProcess:[].concat(Object(d.a)(e.inProcess),[t.inprocess])});case"removeFromProcess":return Object(j.a)(Object(j.a)({},e),{},{inProcess:e.inProcess.filter((function(e){return e!==t.value}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;return"setUserAuth"===t.type?Object(j.a)(Object(j.a)({},e),{},{userId:t.id,userLogin:t.login,userEmail:t.email,isAuth:t.isAuth}):e},form:P.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;return"setInitSuccessful"===t.type?Object(j.a)(Object(j.a)({},e),{},{init:!0}):e}}),A=Object(o.e)(k,Object(o.a)(N.a));window.state=A.getState();var D=A,F=(n(237),n(32)),S=n(33),L=n(35),U=n(34),I=(n(238),n(13)),M=(n(239),n(1));function T(e){return Object(M.jsx)("div",{className:"sidebar",children:Object(M.jsxs)("nav",{className:"nav",children:[Object(M.jsx)(I.b,{to:"/profile",children:"Profile"}),Object(M.jsx)(I.b,{to:"/dialogs",children:"Messages"}),Object(M.jsx)(I.b,{to:"/users",children:"Users"})]})})}var _=n(10),E=n(12);n(246);function H(e){for(var t=Math.ceil(e.totalCount/e.count),n=[],r=1;r<=t;r++)n.push(r);return Object(M.jsxs)("div",{className:"user-page",children:[Object(M.jsx)("div",{className:"title",children:"Users"}),Object(M.jsx)("div",{className:"pag",children:n.map((function(t){return Object(M.jsx)("div",{onClick:function(){return e.newPage(t)},className:e.page===t?"pag__item active":"pag__item",children:t},t)}))}),Object(M.jsx)("div",{className:"body",children:e.users.map((function(t){return Object(M.jsx)("div",{className:"item",children:Object(M.jsxs)("div",{className:"row",children:[Object(M.jsxs)("div",{className:"left",children:[Object(M.jsx)(I.b,{to:"/profile/".concat(t.id),children:Object(M.jsx)("div",{className:"img",children:Object(M.jsx)("img",{src:null!=t.photos.small?t.photos.small:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQCoxWc5ukrkkaNHBArZt7YJq15_xWWDb4NdQ&usqp=CAU",alt:""})})}),Object(M.jsx)("div",{className:e.inProcess.some((function(e){return e===t.id}))?"followed disabled":"followed",onClick:function(){e.followedThunkCreater(t)},children:t.followed?"Unfollow":"Follow"})]}),Object(M.jsx)("div",{className:"right",children:Object(M.jsxs)("div",{className:"subrow",children:[Object(M.jsxs)("div",{className:"info",children:[Object(M.jsx)("div",{className:"name",children:t.name}),Object(M.jsx)("div",{className:"status",children:t.status})]}),Object(M.jsxs)("div",{className:"location",children:[Object(M.jsx)("div",{className:"country",children:"user.location.country"}),Object(M.jsx)("div",{className:"city",children:"user.location.city"})]})]})})]})},t.id)}))}),Object(M.jsx)("div",{className:"cover",children:Object(M.jsx)("div",{className:"btn",children:"Show more"})})]})}var Z=n(63);function q(e){return e.usersPage.users}var B=function(e){Object(L.a)(n,e);var t=Object(U.a)(n);function n(){var e;Object(F.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).newPage=function(t){e.props.getUsersThunkCreater(t,e.props.count)},e}return Object(S.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsersThunkCreater(this.props.page,this.props.count)}},{key:"render",value:function(){return Object(M.jsxs)("div",{children:[Object(M.jsx)("div",{className:"preload",children:this.props.isFetching?Object(M.jsx)(Z.a,{}):null}),Object(M.jsx)(H,{totalCount:this.props.totalCount,count:this.props.count,page:this.props.page,users:this.props.users,newPage:this.newPage,inProcess:this.props.inProcess,followedThunkCreater:this.props.followedThunkCreater})]})}}]),n}(s.a.Component);var R=Object(E.b)((function(e){return{users:q(e),page:e.usersPage.page,count:e.usersPage.count,totalCount:e.usersPage.totalCount,isFetching:e.usersPage.isFetching,inProcess:e.usersPage.inProcess}}),{getUsersThunkCreater:function(e,t){return function(n){n(p(!0)),n(function(e){return{type:"setPage",page:e}}(e)),b.d.getUsers(e,t).then((function(e){n({type:"setUsers",users:e.items}),n(p(!1)),n(function(e){return{type:"setTotalCount",count:e}}(50))}))}},followedThunkCreater:function(e){return function(t){t({type:"setProcess",inprocess:e.id}),e.followed?b.d.unFollow(e.id).then((function(n){0===n.resultCode&&(t({type:"unFollow",id:e.id}),t(f(e.id)))})):b.d.follow(e.id).then((function(n){0===n.resultCode&&(t({type:"follow",id:e.id}),t(f(e.id)))}))}}})(B);function V(e){return Object(M.jsx)("header",{children:Object(M.jsx)("div",{className:"header",children:Object(M.jsx)("div",{className:"container",children:Object(M.jsxs)("div",{className:"header__body",children:[Object(M.jsx)("a",{href:"/",children:Object(M.jsx)("img",{src:"https://cdn.logo.com/hotlink-ok/logo-social.png",alt:""})}),Object(M.jsx)("div",{className:"auth",style:{marginLeft:"auto",fontSize:"24px"},children:e.isAuth?Object(M.jsxs)("div",{children:[e.userLogin," ---- ",Object(M.jsx)("button",{onClick:e.deleteAuth,children:"Logout"})]}):Object(M.jsx)(I.b,{to:"/login",children:"Login"})})]})})})})}var z=function(e){Object(L.a)(n,e);var t=Object(U.a)(n);function n(){return Object(F.a)(this,n),t.apply(this,arguments)}return Object(S.a)(n,[{key:"render",value:function(){return Object(M.jsx)(V,Object(j.a)({},this.props))}}]),n}(s.a.Component);var J=Object(E.b)((function(e){return{userId:e.auth.userId,userLogin:e.auth.userLogin,userEmail:e.auth.userEmail,isAuth:e.auth.isAuth}}),{deleteAuth:function(){return function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.deleteAuth();case 2:0===e.sent.resultCode&&t(w(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(z),W=J,Y=(n(247),n(121)),Q=n(122),G=n(82),K=n(61),X=Object(K.a)(50);var $=Object(Q.a)({form:"login"})((function(e){return Object(M.jsxs)("form",{onSubmit:e.handleSubmit,className:"form",children:[Object(M.jsx)("label",{className:"label",children:Object(M.jsx)("span",{children:Object(M.jsx)(Y.a,{name:"email",component:G.a,type:"text",placeholder:"Email",validate:[K.b,X]})})}),Object(M.jsx)("label",{className:"label",children:Object(M.jsx)("span",{children:Object(M.jsx)(Y.a,{name:"password",component:G.a,type:"text",placeholder:"Password",validate:[K.b,X]})})}),Object(M.jsx)("label",{className:"label",children:Object(M.jsxs)("span",{children:[Object(M.jsx)(Y.a,{name:"rememberMe",component:"input",type:"checkbox"})," Remember me"]})}),e.error&&Object(M.jsx)("div",{className:"form__error",children:e.error}),Object(M.jsx)("button",{type:"submit",className:"btn",children:"Login"})]})}));var ee=Object(o.d)(Object(E.b)((function(e){return{isAuth:e.auth.isAuth}}),{postAuth:function(e,t,n){return function(){var r=Object(g.a)(m.a.mark((function r(s){var c;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b.a.postAuth(e,t,n);case 2:0===(c=r.sent).resultCode?s(y()):s(Object(x.a)("login",{_error:c.messages}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}}))((function(e){return e.isAuth?Object(M.jsx)(_.a,{to:"/profile"}):Object(M.jsxs)("div",{className:"login",children:[Object(M.jsx)("div",{className:"title",children:"Login"}),Object(M.jsx)($,{onSubmit:function(t){t.rememberMe||(t.rememberMe=!1),e.postAuth(t.email,t.password,t.rememberMe)}})]})})),te=s.a.lazy((function(){return n.e(4).then(n.bind(null,295))})),ne=s.a.lazy((function(){return n.e(3).then(n.bind(null,294))})),re=function(e){Object(L.a)(n,e);var t=Object(U.a)(n);function n(){return Object(F.a)(this,n),t.apply(this,arguments)}return Object(S.a)(n,[{key:"componentDidMount",value:function(){this.props.appInitThunkCreator()}},{key:"render",value:function(){return this.props.init?Object(M.jsxs)("div",{className:"page",children:[Object(M.jsx)(W,{}),Object(M.jsx)("main",{children:Object(M.jsx)("div",{className:"main",children:Object(M.jsxs)("div",{className:"container",children:[Object(M.jsx)(T,{}),Object(M.jsx)("div",{className:"page-content",children:Object(M.jsxs)(r.Suspense,{fallback:Object(M.jsx)("div",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."}),children:[Object(M.jsx)(_.b,{exact:!0,path:"/",render:function(){return Object(M.jsx)(_.a,{to:"/profile"})}}),Object(M.jsx)(_.b,{path:"/profile/:userId?",render:function(){return Object(M.jsx)(ne,{})}}),Object(M.jsx)(_.b,{path:"/dialogs",render:function(){return Object(M.jsx)(te,{})}}),Object(M.jsx)(_.b,{path:"/users",render:function(){return Object(M.jsx)(R,{})}}),Object(M.jsx)(_.b,{path:"/login",render:function(){return Object(M.jsx)(ee,{})}})]})})]})})}),Object(M.jsx)("footer",{})]}):Object(M.jsx)(Z.a,{})}}]),n}(r.Component);var se=Object(o.d)(Object(E.b)((function(e){return{init:e.app.init}}),{appInitThunkCreator:function(){return function(e){e(y()).then((function(){e({type:"setInitSuccessful"})}))}}}),_.f)(re);function ce(e){a.a.render(Object(M.jsx)(s.a.StrictMode,{children:Object(M.jsx)(I.a,{children:Object(M.jsx)(E.a,{store:D,children:Object(M.jsx)(se,{})})})}),document.getElementById("root"))}ce(D.getState()),D.subscribe((function(){ce(D.getState())})),i()},61:function(e,t,n){"use strict";function r(e){return e||"number"===typeof e?void 0:"Required"}function s(e){return function(t){return t&&t.length>e?"Must be ".concat(e," characters or less"):void 0}}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}))},63:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n.p+"static/media/preload.96069256.svg",s=n(1);function c(e){return Object(s.jsx)("img",{src:r,alt:""})}},82:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(5),s=n(67),c=(n(248),n(1)),a=["input","meta","children"],i=["input","meta","children"],o=["input","meta","children"];function u(e){e.input;var t=e.meta,n=e.children;Object(s.a)(e,a);return Object(c.jsxs)("div",{className:t.touched&&t.error?"label error":"label",children:[Object(c.jsx)("span",{children:n}),Object(c.jsx)("div",{className:"error__text",children:t.error})]})}function l(e){var t=e.input,n=(e.meta,e.children,Object(s.a)(e,i));return Object(c.jsx)(u,Object(r.a)(Object(r.a)({},e),{},{children:Object(c.jsx)("textarea",Object(r.a)(Object(r.a)({},t),n))}))}function d(e){var t=e.input,n=(e.meta,e.children,Object(s.a)(e,o));return Object(c.jsx)(u,Object(r.a)(Object(r.a)({},e),{},{children:Object(c.jsx)("input",Object(r.a)(Object(r.a)({},t),n))}))}},89:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return j}));var r=n(5),s=n(17),c={postsData:[{id:1,text:"Hello world!!!!"},{id:2,text:"I'm Mike, hi"},{id:3,text:"You are my friend"}],profile:null,status:""};function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"addPost":var n=Object(r.a)({},e);n.postsData=Object(r.a)({},e.postsData),n.postsData=Object.keys(n.postsData).map((function(e){return n.postsData[e]}));var s=n.postsData[n.postsData.length-1].id+1,a={id:s,text:t.text};return n.postsData.push(a),n;case"setProfile":return Object(r.a)(Object(r.a)({},e),{},{profile:Object(r.a)({},t.profile)});case"setStatus":return Object(r.a)(Object(r.a)({},e),{},{status:t.status});default:return e}}var i=function(e){return{type:"addPost",text:e}},o=function(e){return{type:"setStatus",status:e}};function u(e){return function(t){s.d.getUserProfile(e).then((function(e){t({type:"setProfile",profile:e})}))}}function l(e){return function(t){s.c.getStatus(e).then((function(e){t(o(e||"There no status!!!"))}))}}function d(e){return function(t){s.c.updateStatus(e).then((function(n){0===n.resultCode&&t(o(e))}))}}function j(e){return function(t){s.b.putPhoto(e).then((function(e){}))}}},98:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return a}));var r=n(5),s={usersData:[{id:1,name:"Illia"},{id:2,name:"Lilia"},{id:3,name:"Olya"},{id:4,name:"Roman"},{id:5,name:"Bogdan"}],messagesData:[{id:1,src:"https://www.pixsy.com/wp-content/uploads/2021/04/ben-sweet-2LowviVHZ-E-unsplash-1.jpeg",text:"Hi"},{id:2,src:"https://www.pixsy.com/wp-content/uploads/2021/04/ben-sweet-2LowviVHZ-E-unsplash-1.jpeg",text:"How are you?"},{id:3,src:"https://www.pixsy.com/wp-content/uploads/2021/04/ben-sweet-2LowviVHZ-E-unsplash-1.jpeg",text:"Hello world!!!!!"}]};function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;if("addMessage"===t.type){var n=Object(r.a)({},e);n.messagesData=Object(r.a)({},e.messagesData),n.messagesData=Object.keys(n.messagesData).map((function(e){return n.messagesData[e]}));var c=n.messagesData[n.messagesData.length-1].id+1,a={id:c,text:t.text,src:"https://www.pixsy.com/wp-content/uploads/2021/04/ben-sweet-2LowviVHZ-E-unsplash-1.jpeg"};return n.messagesData.push(a),n}return e}var a=function(e){return{type:"addMessage",text:e}}}},[[288,1,2]]]);
//# sourceMappingURL=main.6bce8448.chunk.js.map